<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QUỐC KHÁNH BÁN SUB</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Syncopate:wght@400;700&family=Inter:wght@300;500;900&display=swap"
      rel="stylesheet"
    />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <style>
      :root {
        --accent: #00f2ff;
        --bg: #030303;
        --card-bg: rgba(255, 255, 255, 0.02);
        --border: rgba(0, 242, 255, 0.2);
        --admin-glow: rgba(0, 242, 255, 0.1);
      }

      body {
        font-family: "Inter", sans-serif;
        background-color: var(--bg);
        color: white;
        min-height: 100vh;
        overflow-x: hidden;
      }

      .font-special {
        font-family: "Syncopate", sans-serif;
      }

      /* LƯỚI NỀN LASER */
      .laser-grid {
        position: fixed;
        inset: 0;
        background-image: linear-gradient(
            to right,
            rgba(0, 242, 255, 0.05) 1px,
            transparent 1px
          ),
          linear-gradient(
            to bottom,
            rgba(0, 242, 255, 0.05) 1px,
            transparent 1px
          );
        background-size: 50px 50px;
        perspective: 1000px;
        transform: rotateX(60deg) translateY(-100px);
        z-index: -1;
        mask-image: linear-gradient(
          to bottom,
          transparent,
          black 50%,
          transparent
        );
      }

      /* SIDEBAR RESPONSIVE */
      .sidebar {
        width: 280px;
        height: 100vh;
        background: rgba(5, 5, 5, 0.95);
        backdrop-filter: blur(25px);
        border-right: 1px solid rgba(255, 255, 255, 0.1);
        position: fixed;
        left: -280px; /* Ẩn trên mobile */
        top: 0;
        z-index: 100;
        transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .sidebar.active {
        left: 0;
      }

      @media (min-width: 1024px) {
        .sidebar {
          left: 0;
          background: rgba(255, 255, 255, 0.01);
        }
      }

      .sidebar::after {
        content: "";
        position: absolute;
        right: 0;
        top: 0;
        width: 1px;
        height: 100%;
        background: linear-gradient(
          to bottom,
          transparent,
          var(--accent),
          transparent
        );
      }

      /* MOBILE HEADER */
      .mobile-header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 60px;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        padding: 0 20px;
        z-index: 80;
        border-bottom: 1px solid var(--border);
      }

      @media (min-width: 1024px) {
        .mobile-header { display: none; }
      }

      .brand-logo {
        width: 35px;
        height: 35px;
        object-fit: cover;
        border-radius: 50%;
        border: 2px solid var(--border);
        filter: drop-shadow(0 0 8px var(--accent));
        margin-right: 12px;
      }

      .nav-item {
        padding: 14px 25px;
        display: flex;
        align-items: center;
        color: rgba(255, 255, 255, 0.4);
        transition: 0.3s;
        text-transform: uppercase;
        letter-spacing: 2px;
        font-size: 10px;
        border-left: 3px solid transparent;
        cursor: pointer;
      }

      .nav-item:hover,
      .nav-item.active {
        color: var(--accent);
        background: rgba(0, 242, 255, 0.05);
        border-left: 3px solid var(--accent);
        text-shadow: 0 0 10px rgba(0, 242, 255, 0.5);
      }

      /* NỘI DUNG CHÍNH */
      .main-content {
        padding: 100px 20px 40px 20px; /* Thêm padding top cho mobile header */
        display: flex;
        justify-content: center;
        transition: 0.4s;
      }

      @media (min-width: 1024px) {
        .main-content {
          margin-left: 280px;
          padding: 40px;
        }
      }

      .form-container {
        width: 100%;
        max-width: 700px;
      }

      .nexus-card {
        background: var(--card-bg);
        border: 1px solid var(--border);
        padding: 20px;
        box-shadow: 0 0 15px var(--admin-glow);
      }

      @media (min-width: 640px) {
        .nexus-card { padding: 30px; }
      }

      .label-tech {
        font-size: 9px;
        color: var(--accent);
        letter-spacing: 2px;
        text-transform: uppercase;
        margin-bottom: 10px;
        display: block;
        font-weight: bold;
      }

      .input-field {
        width: 100%;
        background: rgba(0, 0, 0, 0.6);
        border: 1px solid rgba(0, 242, 255, 0.1);
        padding: 14px;
        color: white;
        font-size: 13px;
        outline: none;
        margin-bottom: 20px;
        transition: 0.3s;
        appearance: none; /* Reset cho iOS */
      }

      .btn-execute {
        width: 100%;
        background: var(--accent);
        color: black;
        padding: 16px;
        font-weight: 900;
        text-transform: uppercase;
        letter-spacing: 3px;
        font-size: 12px;
        transition: 0.4s;
        cursor: pointer;
        border: none;
      }

      /* MODAL */
      #confirm-modal {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.9);
        z-index: 200;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(8px);
        padding: 20px;
      }

      .modal-box {
        background: #050505;
        border: 1px solid var(--accent);
        padding: 25px;
        width: 100%;
        max-width: 480px;
        position: relative;
      }

      .status-pulse {
        width: 8px;
        height: 8px;
        background: var(--accent);
        border-radius: 50%;
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.2; }
      }

      /* Overlay khi mở menu trên mobile */
      .sidebar-overlay {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.5);
        z-index: 90;
      }
      .sidebar-overlay.active { display: block; }
    </style>
  </head>
  <body>
    <div class="laser-grid"></div>

    <header class="mobile-header">
      <button onclick="toggleMenu()" class="text-white text-2xl mr-4">
        <i class="fas fa-bars text-cyan-400"></i>
      </button>
      <div class="flex items-center">
        <h2 class="font-special text-sm font-bold tracking-tighter uppercase">
          Khánh Bán<span class="text-cyan-400">Sub</span>
        </h2>
      </div>
    </header>

    <div class="sidebar-overlay" id="overlay" onclick="toggleMenu()"></div>

    <aside class="sidebar" id="sidebar">
      <div class="p-8">
        <div class="flex items-center justify-between">
            <div class="flex items-center cursor-pointer" onclick="navigateTo('trangchu.html')">
              <img src="./img/ack.jpg" alt="Logo" class="brand-logo" />
              <h2 class="font-special text-lg font-bold tracking-tighter">
                Khánh Bán<span class="text-cyan-400">Sub</span>
              </h2>
            </div>
            <button onclick="toggleMenu()" class="lg:hidden text-gray-500">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="flex items-center mt-3 space-x-2">
          <div class="status-pulse"></div>
          <span class="text-[9px] text-gray-500 uppercase tracking-[0.3em]">Hệ thống trực tuyến</span>
        </div>
      </div>
      <nav class="mt-4">
        <div class="nav-item" onclick="navigateTo('trangchu.html')">
          <i class="fas fa-th-large mr-4 w-4"></i> Quản Lý Chung
        </div>
        <div class="px-8 py-4 text-[9px] text-gray-600 uppercase tracking-widest font-bold">Danh Sách Dịch Vụ</div>
        <div class="nav-item active" onclick="navigateTo('facebook.html')">
          <i class="fab fa-facebook-f mr-4 w-4"></i> Facebook 
        </div>
        <div class="nav-item" onclick="navigateTo('tiktok.html')">
          <i class="fab fa-tiktok mr-4 w-4"></i> TikTok 
        </div>
        <div class="nav-item" onclick="navigateTo('instagram.html')">
          <i class="fab fa-instagram mr-4 w-4"></i> Instagram 
        </div>
        <div class="nav-item" onclick="navigateTo('youtube.html')">
          <i class="fab fa-youtube mr-4 w-4"></i> YouTube 
        </div>
        <div class="px-8 py-4 text-[9px] text-gray-600 uppercase tracking-widest font-bold">Dữ liệu hệ thống</div>
        <div class="nav-item" onclick="navigateTo('lichsu.html')">
          <i class="fas fa-history mr-4 w-4"></i> Trò Chơi Mai Mắn 
        </div>
        <div class="nav-item text-red-500/70 hover:text-red-500 mt-6" onclick="logout()">
          <i class="fas fa-power-off mr-4 w-4"></i> Logout
        </div>
      </nav>
    </aside>

    <main class="main-content">
      <div class="form-container">
        <div class="mb-6 lg:mb-10 border-l-2 border-cyan-400 pl-6">
          <h1 class="font-special text-2xl lg:text-3xl uppercase tracking-tighter">
            Dịch Vụ <span class="text-cyan-400">Facebook</span>
          </h1>
          <p class="text-[9px] lg:text-[10px] text-gray-600 tracking-[0.4em] mt-2 uppercase italic">Giao diện Thanh Toán</p>
        </div>

        <div class="nexus-card">
          <label class="label-tech">// 01. Chọn Dịch Vụ facebook</label>
          <select class="input-field cursor-pointer" id="service-select" onchange="updateTotal()">
            <option value="29">Tăng Theo Dõi (Followers) - 29đ</option>
            <option value="20">Tăng Like bài viết - 20đ</option>
            <option value="550">Tăng Bình Luận - 550đ</option>
            <option value="25">Tăng Share - 25đ</option>
            <option value="25">Tăng View - 25đ</option>
          </select>

          <label class="label-tech">// 02. Nhập Link (URL)</label>
          <input type="text" id="target-link" class="input-field" placeholder="Nhập link Profile/Post cần tăng..." />

          <label class="label-tech">// 03. Số Lượng cần Tăng </label>
          <input type="number" id="quantity" class="input-field" placeholder="Tối thiểu 100" oninput="updateTotal()" />

          <div class="mb-6 p-4 bg-white/5 border border-white/10 text-[10px] lg:text-[11px] text-gray-400 space-y-2">
            <p class="text-white font-bold uppercase text-[9px] mb-2 text-cyan-400">Thông số máy chủ:</p>
            <p>• Thời gian hoàn thành: 1 giờ 21 phút 46giây</p>
            <p>• Tốc độ 3k-5k/link/ngày</p>
            <p>• Tối thiểu 10/Tối đa: 100k - Không hỗ trợ hủy đơn - Không Bảo Hành</p>
            <p>• Không hoàn tiền đối với các đơn link không hợp lệ hoặc sai dạng đơn hàng</p>
          </div>

          <div class="p-4 bg-cyan-400/5 border border-cyan-400/20 mb-8 flex justify-between items-center">
            <span class="text-[9px] uppercase tracking-widest text-gray-500">Số Tiền Thanh Toán:</span>
            <span class="font-special text-lg lg:text-xl text-cyan-400" id="total-price">0 VNĐ</span>
          </div>

          <button class="btn-execute" onclick="openModal()">
            <i class="fas fa-bolt mr-2"></i> Xác Nhận Thanh Toán
          </button>
        </div>
      </div>
    </main>

    <div id="confirm-modal">
      <div class="modal-box">
        <h2 class="font-special text-lg text-cyan-400 mb-6 uppercase tracking-tighter italic">Kiểm tra thông số</h2>
        <div class="space-y-4 text-[11px] uppercase tracking-[0.1em] text-gray-400">
          <div class="flex justify-between border-b border-white/5 pb-2">
            <span>Giao thức:</span>
            <span id="confirm-service" class="text-white font-bold">---</span>
          </div>
          <div class="border-b border-white/5 pb-2">
            <span class="block mb-1">Địa chỉ đích (URL):</span>
            <span id="confirm-link" class="text-cyan-400 break-all lowercase font-medium tracking-normal">---</span>
          </div>
          <div class="flex justify-between border-b border-white/5 pb-2">
            <span>Khối lượng:</span>
            <span id="confirm-qty" class="text-white font-bold">0</span>
          </div>
          <div class="bg-cyan-400/10 p-4 flex justify-between items-center border border-cyan-400/20 mt-6">
            <span class="text-cyan-400 font-bold">Tổng cộng:</span>
            <span id="confirm-total" class="text-cyan-400 text-lg font-black">0 VNĐ</span>
          </div>
        </div>
        <div class="flex space-x-3 mt-8">
          <button onclick="closeModal()" class="flex-1 border border-red-500/50 text-red-500 py-3 text-[10px] font-black uppercase">Hủy</button>
          <button onclick="submitOrder()" id="final-confirm-btn" class="flex-1 bg-cyan-400 text-black py-3 text-[10px] font-black uppercase">Xác nhận</button>
        </div>
      </div>
    </div>

    <script>
      function toggleMenu() {
        document.getElementById('sidebar').classList.toggle('active');
        document.getElementById('overlay').classList.toggle('active');
      }

      function navigateTo(url) {
        document.body.style.opacity = "0.5";
        setTimeout(() => {
          window.location.href = url;
        }, 200);
      }

      function logout() {
        if (confirm("Xác nhận ngắt kết nối hệ thống?"))
          window.location.href = "index.html";
      }

      function updateTotal() {
        const price = document.getElementById("service-select").value;
        const qty = document.getElementById("quantity").value;
        const total = price * qty || 0;
        document.getElementById("total-price").innerText =
          total.toLocaleString("vi-VN") + " VNĐ";
      }

      function openModal() {
        const link = document.getElementById("target-link").value;
        const qty = document.getElementById("quantity").value;

        if (!link || !qty || qty <= 0) {
          alert("Vui lòng nhập Link và Số lượng hợp lệ!");
          return;
        }

        const serviceObj = document.getElementById("service-select");
        document.getElementById("confirm-service").innerText =
          serviceObj.options[serviceObj.selectedIndex].text;
        document.getElementById("confirm-link").innerText = link;
        document.getElementById("confirm-qty").innerText = qty;
        document.getElementById("confirm-total").innerText =
          document.getElementById("total-price").innerText;

        document.getElementById("confirm-modal").style.display = "flex";
      }

      function closeModal() {
        document.getElementById("confirm-modal").style.display = "none";
      }

      async function submitOrder() {
        const btn = document.getElementById("final-confirm-btn");
        btn.disabled = true;
        btn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> XỬ LÝ...';

        const orderData = {
          Nền_Tảng: "FACEBOOK",
          Dịch_Vụ: document.getElementById("confirm-service").innerText,
          Link: document.getElementById("confirm-link").innerText,
          Số_Lượng: document.getElementById("confirm-qty").innerText,
          Tổng_Tiền: document.getElementById("confirm-total").innerText,
          Time: new Date().toLocaleString(),
        };

        localStorage.setItem("nexusOrder", JSON.stringify(orderData));

        try {
          const response = await fetch("https://formspree.io/f/mdaneeyl", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
              Accept: "application/json",
            },
            body: JSON.stringify(orderData),
          });

          if (response.ok) {
            document.body.style.opacity = "0";
            setTimeout(() => {
              window.location.href = "thanhtoan.html";
            }, 500);
          } else {
            alert("Máy chủ bận, vui lòng thử lại sau!");
            btn.disabled = false;
            btn.innerText = "Xác nhận lệnh";
          }
        } catch (error) {
          alert("Lỗi kết nối mạng!");
          btn.disabled = false;
          btn.innerText = "Xác nhận lệnh";
        }
      }
      
    </script>
  </body>
</html>