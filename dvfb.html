<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dá»‹ch vá»¥ Facebook - KHÃNH BÃN SUB</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body
    class="bg-gradient-to-br from-indigo-50 via-blue-50 to-violet-50 min-h-screen flex items-center justify-center font-[Poppins]"
  >
    <!-- Modal nháº¯c thanh toÃ¡n -->
    <div
      id="paymentNotice"
      class="fixed inset-0 bg-black/40 flex items-center justify-center z-50"
    >
      <div
        class="bg-white rounded-2xl shadow-2xl p-6 w-11/12 max-w-md text-center animate-bounce-in"
      >
        <div class="flex items-center justify-center gap-3 mb-3">
          <img
            src="./DVFB.png"
            alt="Logo Shop"
            class="w-14 h-14 rounded-full border border-indigo-300 shadow"
          />
          <span class="text-lg font-bold text-indigo-600">KHÃNH BÃN SUB</span>
        </div>
        <h2 class="text-xl font-bold text-indigo-600 mb-2">
          âš ï¸ Nháº¯c nhá»Ÿ thanh toÃ¡n
        </h2>
        <p class="text-gray-700 mb-4">
          Vui lÃ²ng
          <span class="font-semibold text-rose-500">chuyá»ƒn khoáº£n trÆ°á»›c</span> Ä‘á»ƒ
          Ä‘Æ¡n hÃ ng Ä‘Æ°á»£c duyá»‡t nhanh chÃ³ng. HÃ£y Ä‘áº£m báº£o nháº­p Ä‘Ãºng
          <span class="text-blue-500">ná»™i dung chuyá»ƒn khoáº£n</span>.
        </p>
        <button
          onclick="closeNotice()"
          class="px-5 py-2 bg-gradient-to-r from-sky-400 to-indigo-400 text-white rounded-lg shadow hover:scale-[1.05] transition"
        >
          TÃ´i Ä‘Ã£ hiá»ƒu
        </button>
      </div>
    </div>

    <div
      class="bg-white rounded-2xl shadow-xl p-6 w-full max-w-md border border-indigo-100 relative"
    >
      <!-- Logo + TÃªn shop -->
      <div class="flex justify-center items-center gap-3 mb-4">
        <img
          src="./DVFB.png"
          alt="Logo Shop"
          class="w-16 h-16 rounded-full border border-indigo-300 shadow"
        />
        <span class="text-xl font-bold text-indigo-600">KHÃNH BÃN SUB</span>
      </div>

      <!-- TiÃªu Ä‘á» -->
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-semibold text-indigo-600">
          ğŸ›’ Äáº·t dá»‹ch vá»¥ Facebook
        </h3>
        <button onclick="goBack()" class="text-gray-500 hover:text-red-500">
          âœ•
        </button>
      </div>

      <!-- Form -->
      <form
        id="orderForm"
        class="space-y-3"
        onsubmit="return submitOrder(event)"
      >
        <!-- Chá»n loáº¡i dá»‹ch vá»¥ -->
        <label class="block text-sm font-medium text-gray-700"
          >Chá»n dá»‹ch vá»¥</label
        >
        <select
          id="serviceName"
          name="service"
          class="w-full p-3 rounded border bg-slate-50"
          onchange="toggleEmotion(); tinhTien();"
        >
          <option value="like">ğŸ‘ Like (Cáº£m xÃºc)</option>
          <option value="follow">ğŸ‘¤ Follow Facebook</option>
          <option value="view">ğŸ‘€ View Video</option>
          <option value="share">ğŸ”„ Share Video</option>
          <option value="review">â­ Review Fanpage</option>
        </select>

        <!-- Chá»n cáº£m xÃºc (chá»‰ Like) -->
        <div id="emotionGroup" class="space-y-2">
          <label class="block text-sm font-medium text-gray-700"
            >Chá»n cáº£m xÃºc</label
          >
          <select id="emotion" class="w-full p-3 rounded border bg-slate-50">
            <option value="like">ğŸ‘ ThÃ­ch</option>
            <option value="love">â¤ï¸ YÃªu thÃ­ch</option>
            <option value="haha">ğŸ˜† Haha</option>
            <option value="wow">ğŸ˜® Wow</option>
            <option value="sad">ğŸ˜¢ Buá»“n</option>
          </select>
        </div>

        <!-- Hidden input Ä‘á»ƒ gá»­i cáº£m xÃºc -->
        <input type="hidden" id="hiddenEmotion" name="emotion" />

        <!-- Link -->
        <input
          type="text"
          id="targetLink"
          name="link"
          placeholder="Link post/video/fanpage"
          class="w-full p-3 rounded border"
          required
        />

        <!-- Sá»‘ lÆ°á»£ng -->
        <input
          type="number"
          id="quantity"
          name="quantity"
          placeholder="Sá»‘ lÆ°á»£ng"
          class="w-full p-3 rounded border"
          min="1"
          required
          oninput="tinhTien()"
        />

        <!-- Tá»•ng tiá»n -->
        <div id="totalPrice" class="text-right font-semibold text-rose-500">
          Tá»•ng tiá»n: 0 VNÄ
        </div>

        <!-- Chi tiáº¿t dá»‹ch vá»¥ -->
        <div
          class="mt-4 border rounded-xl p-4 bg-gradient-to-br from-indigo-50 to-white shadow-sm text-sm text-gray-700"
        >
          <h4 class="font-semibold text-indigo-600 mb-2">
            â„¹ï¸ Chi tiáº¿t dá»‹ch vá»¥
          </h4>
          <ul class="space-y-1">
            <li>
              âœ… <span class="font-medium">Link vÃ­ dá»¥:</span> Link
              post/video/fanpage Facebook
            </li>
            <li>
              ğŸ•“ <span class="font-medium">Thá»i gian báº¯t Ä‘áº§u:</span> 0 - 30 PhÃºt
            </li>
            <li>ğŸš€ <span class="font-medium">Tá»‘c Ä‘á»™:</span> 3K - 10K/NgÃ y</li>
            <li>
              âš–ï¸ <span class="font-medium">Tá»‘i thiá»ƒu/Tá»‘i Ä‘a:</span> 1K / 100K
            </li>
            <li>
              â™»ï¸ <span class="font-medium">Báº£o hÃ nh:</span> KhÃ´ng báº£o hÃ nh
            </li>
            <li>ğŸŒ <span class="font-medium">Quá»‘c gia:</span> ToÃ n cáº§u</li>
          </ul>

          <div class="mt-4 border-t pt-3">
            <h4 class="font-semibold text-rose-600 mb-2">âš ï¸ LÆ°u Ã½</h4>
            <ul class="list-disc list-inside space-y-1 text-gray-600">
              <li>
                ğŸ“Œ TÃ i khoáº£n pháº£i <span class="font-medium">cÃ´ng khai</span>,
                khÃ´ng Ä‘Æ°á»£c riÃªng tÆ°.
              </li>
              <li>
                ğŸ“Œ LiÃªn káº¿t sai
                <span class="font-medium">khÃ´ng Ä‘Æ°á»£c hoÃ n láº¡i tiá»n</span>, kiá»ƒm
                tra ká»¹ trÆ°á»›c khi Ä‘áº·t.
              </li>
              <li>
                ğŸ“Œ NghiÃªm cáº¥m buff ID vi pháº¡m phÃ¡p luáº­t, chÃ­nh trá»‹, Ä‘á»“i trá»¥y...
              </li>
              <li>ğŸ“Œ Khi dá»‹ch vá»¥ báº­n, tá»‘c Ä‘á»™ báº¯t Ä‘áº§u cÃ³ thá»ƒ thay Ä‘á»•i.</li>
              <li>
                ğŸ“Œ KhÃ´ng Ä‘áº·t Ä‘Æ¡n thá»© hai trÃªn cÃ¹ng liÃªn káº¿t trÆ°á»›c khi Ä‘Æ¡n Ä‘áº§u
                hoÃ n táº¥t.
              </li>
            </ul>
          </div>
        </div>

        <!-- ThÃ´ng tin thanh toÃ¡n -->
        <div
          class="mt-4 border rounded-lg p-3 bg-gray-50 text-sm text-gray-700"
        >
          <h4 class="font-semibold mb-2">ThÃ´ng tin thanh toÃ¡n</h4>
          <div class="flex items-center gap-2 mb-3">
            <img src="./mb.jpg" alt="MB Bank" class="h-8" />
            <span class="font-medium">MB Bank</span>
          </div>
          <ul class="space-y-1">
            <li>
              <span class="font-medium">Sá»‘ tÃ i khoáº£n:</span>
              <span
                id="stk"
                class="text-rose-600 font-semibold cursor-pointer"
                onclick="copyText('stk')"
                >0376447206</span
              >
            </li>
            <li>
              <span class="font-medium">Chá»§ tÃ i khoáº£n:</span> TRAN QUOC KHANH
            </li>
            <li>
              <span class="font-medium">Ná»™i dung CK:</span>
              <span
                id="ndck"
                class="text-blue-600 font-semibold cursor-pointer"
                onclick="copyText('ndck')"
                >TÃªn TÃ i Khoáº£n Cáº§n TÄƒng</span
              >
            </li>
          </ul>
          <div class="mt-3 text-center">
            <p class="text-sm mb-1">QuÃ©t mÃ£ QR Ä‘á»ƒ thanh toÃ¡n nhanh</p>
            <img
              src="./nganhang.jpg"
              alt="QR Thanh toÃ¡n"
              class="w-40 mx-auto border rounded-lg"
            />
          </div>
          <p class="text-xs text-gray-500 mt-2 text-center">
            ğŸ‘‰ Báº¥m vÃ o <span class="text-rose-600">Sá»‘ tÃ i khoáº£n</span> hoáº·c
            <span class="text-blue-600">Ná»™i dung CK</span> Ä‘á»ƒ copy nhanh.
          </p>
        </div>

        <!-- áº¨n input gá»­i tá»•ng tiá»n -->
        <input type="hidden" id="hiddenTotal" name="total" />

        <!-- NÃºt -->
        <div class="flex justify-center gap-4 mt-3">
          <button
            type="submit"
            class="flex-[2] px-5 py-3 bg-gradient-to-r from-sky-400 to-indigo-400 text-white rounded-lg shadow hover:scale-[1.02] transition"
          >
            XÃ¡c nháº­n Ä‘áº·t hÃ ng
          </button>
          <button
            type="button"
            class="flex-1 px-5 py-3 bg-gray-300 text-gray-700 rounded-lg shadow hover:scale-[1.02] transition"
            onclick="goBack()"
          >
            Huá»·
          </button>
        </div>
      </form>
    </div>

    <script>
    function closeNotice() {
        document.getElementById("paymentNotice").style.display = "none";
    }

    function toggleEmotion() {
        const service = document.getElementById("serviceName").value;
        document.getElementById("emotionGroup").style.display =
            service === "like" ? "block" : "none";
        tinhTien();
    }

    const PRICES = {
        'like': 22,
        'follow': 35,
        'view': 11,
        'share': 29,
        'review': 90
    };

    function getServiceNameDisplay(serviceId) {
        switch (serviceId) {
            case 'like': return 'ğŸ‘ Like (Cáº£m xÃºc)';
            case 'follow': return 'ğŸ‘¤ Follow Facebook';
            case 'view': return 'ğŸ‘€ View Video';
            case 'share': return 'ğŸ”„ Share Video';
            case 'review': return 'â­ Review Fanpage';
            default: return 'KhÃ¡c';
        }
    }

    function tinhTien() {
        const qty = parseInt(document.getElementById("quantity").value) || 0;
        const service = document.getElementById("serviceName").value;
        let pricePerUnit = PRICES[service] || 0;

        const total = qty * pricePerUnit;
        document.getElementById("totalPrice").textContent =
            "Tá»•ng tiá»n: " + total.toLocaleString() + " VNÄ";
        document.getElementById("hiddenTotal").value = total;
    }

    function copyText(id) {
        const text = document.getElementById(id).innerText;
        navigator.clipboard.writeText(text);
        alert("ÄÃ£ copy: " + text);
    }

    // HÃ m táº¡o ID Ä‘Æ¡n hÃ ng ngáº«u nhiÃªn Ä‘Æ¡n giáº£n
    function generateOrderId() {
        return 'ORDER-' + Math.floor(Math.random() * 900000 + 100000);
    }

    async function submitOrder(e) {
        e.preventDefault();

        // 1. Thu tháº­p dá»¯ liá»‡u
        const serviceId = document.getElementById("serviceName").value;
        const emotion = serviceId === "like" ? document.getElementById("emotion").value : "";
        const targetLink = document.getElementById("targetLink").value.trim();
        const quantity = parseInt(document.getElementById("quantity").value);
        const total = parseInt(document.getElementById("hiddenTotal").value);
        const serviceName = getServiceNameDisplay(serviceId);
        
        const newOrder = {
            id: generateOrderId(),
            service: serviceName,
            emotion: emotion,
            link: targetLink,
            quantity: quantity,
            total: total,
            status: 'Chá» thanh toÃ¡n',
            date: new Date().toLocaleString('vi-VN'),
        };

        // 2. LÆ¯U VÃ€O LOCALSTORAGE
        let orders = JSON.parse(localStorage.getItem("orders")) || [];
        orders.unshift(newOrder); // ThÃªm Ä‘Æ¡n hÃ ng má»›i nháº¥t lÃªn Ä‘áº§u
        localStorage.setItem("orders", JSON.stringify(orders));
        
        // 3. (TÃ¹y chá»n) Gá»­i lÃªn Formspree (Náº¿u báº¡n váº«n muá»‘n dÃ¹ng)
         const form = document.getElementById("orderForm");
         const response = await fetch("https://formspree.io/f/mqayelqy", {
            method: "POST",
             body: new FormData(form),
             headers: { Accept: "application/json" },
         });

        // 4. ThÃ´ng bÃ¡o vÃ  chuyá»ƒn hÆ°á»›ng
        alert(`âœ… ÄÆ¡n hÃ ng ${newOrder.id} Ä‘Ã£ Ä‘Æ°á»£c táº¡o thÃ nh cÃ´ng! Vui lÃ²ng thanh toÃ¡n.`);
        // Chuyá»ƒn hÆ°á»›ng Ä‘áº¿n trang Lá»‹ch sá»­ Ä‘Æ¡n hÃ ng
        window.location.href = "thanhtoan.html"; 
    }

    function goBack() {
        window.location.href = "trangchu.html"; // Giáº£ sá»­ Ä‘Ã¢y lÃ  trang chá»§
    }

    document.addEventListener('DOMContentLoaded', () => {
        toggleEmotion();
    });
</script>
  </body>
</html>